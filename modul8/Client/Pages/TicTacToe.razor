@page "/tictactoe"

<h3>Kryds-og-bolle</h3>

<table>
    @for (int i = 0; i < 3; i++)
    {
        <tr>
            @for (int j = 0; j < 3; j++)
            {
                <td @onclick="() => MarkCell(i, j)">
                    @board[i, j]
                </td>
            }
        </tr>
    }
</table>

@if (!string.IsNullOrEmpty(winner))
{
    <p>Vinderen er: @winner</p>
}

@code {
    string[,] board = new string[3, 3];
    string currentPlayer = "X";
    string winner = "";

    void MarkCell(int row, int col)
    {
        if (string.IsNullOrEmpty(board[row, col]) && string.IsNullOrEmpty(winner))
        {
            board[row, col] = currentPlayer;
            if (IsWinner(row, col))
            {
                winner = currentPlayer;
            }
            else
            {
                currentPlayer = (currentPlayer == "X") ? "O" : "X";
            }
        }
    }

    bool IsWinner(int row, int col)
    {
        if (board[row, 0] == currentPlayer && board[row, 1] == currentPlayer && board[row, 2] == currentPlayer)
            return true;
        if (board[0, col] == currentPlayer && board[1, col] == currentPlayer && board[2, col] == currentPlayer)
            return true;
        if (row == col && board[0, 0] == currentPlayer && board[1, 1] == currentPlayer && board[2, 2] == currentPlayer)
            return true;
        if (row + col == 2 && board[0, 2] == currentPlayer && board[1, 1] == currentPlayer && board[2, 0] == currentPlayer)
            return true;

        return false;
    }
}
